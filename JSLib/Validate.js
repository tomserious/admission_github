var validanguage={useLibrary:"none",version:"0.9.9",settings:{showAlert:false,focusOnerror:false,validateAllFieldsOnsubmit:true,onsuccess:"validanguage.hideError",onerror:"validanguage.showError",errorMsg:"您输入的数据无效",requiredErrorMsg:"请您填写必填项",minlengthErrorMsg:"此项长度不得小于 {!minlength} 字符",maxlengthErrorMsg:"此项长度不得大于 {!maxlength} 字符",characterValidationErrorMsg:"您输入了无效的字符",onErrorClassName:"vdError",noErrorClassName:"vdNoError",passedFieldClassName:"passedField",failedFieldClassName:"failedField",errorMsgSpanSuffix:"_errorMsg",showFailedFields:false,errorListText:"<strong>请修改以下各项：</strong>",errorDivId:"vdErrorDiv",errorListId:"vdErrorList",errorListItemSuffix:"_vd_li",showSubmitMessageId:"vdSubmitMessage",showSubmitMessageMessage:"请稍候",emptyOptionElements:["&nbsp;","0"," ",""],defaultValidationHandlers:["submit"],defaultTransformationHandlers:["blur"],callToggleTransformationsOnload:true,toggleVisibilityDefaultsToHidden:true,ajaxTimeout:30,submitFormOnExpiredAjax:true,cacheAjaxLookups:true,loadCommentAPI:true,commentDelimiter:"\n",validationErrorColor:"#FF6666",normalTextboxColor:"",timeDelay:100,typingDelay:1100,validateRequiredAlternativesOnclick:true,errorOnMatch:false,onload:function(){},foo:""},ajaxLookup:{},alertCounter:true,debug:false,el:{},fields:{},forcedSubmission:false,forms:{},formLookup:{},ignoreTheseKeyCodes:[8,37,38,39,40,46],requiredAlternatives:[],supportedEvents:["blur","change","keypress","keyup","keydown","submit","click","typing"],supportedEventHandlers:["onblur","onchange","onkeypress","onkeyup","onkeydown","onsubmit","onclick","ontyping"],typingDelay:[],vdLoaded:false,addEvent:function(d,b,a){if(d.addEventListener){d.addEventListener(b,a,false);return true}else{if(d.attachEvent){var c=d.attachEvent("on"+b,a);return c}}},addEventInit:function(){switch(this.useLibrary){case"prototype":case"scriptaculous":this.addEvent=function(c,a,b){Event.observe(c,a,b)};break;case"dojo":this.addEvent=function(c,a,b){dojo.connect(c,"on"+a,b)};break;case"jquery":this.addEvent=function(d,b,c){if(d==window){jQuery(document).ready(c)}else{var a="#"+d.id;jQuery(a).bind(b,c)}};break}},addOrCreateValidationWrapper:function(b,a,f){var e=b.id;if(a=="submit"){if(this.empty(f)){return}var d=validanguage.formLookup[e];if(typeof d=="number"){var c=document.forms[d]}else{var c=document.getElementById(d)}if(typeof validanguage.forms[d].validations=="undefined"){validanguage.forms[d].validations=[];this.addEvent(c,a,function(i){var h=i||window.evt;var g=validanguage.validationWrapper(i);if(g==false){h.returnValue=false;if(h.preventDefault){h.preventDefault()}return false}else{return true}})}validanguage.forms[d].validations[validanguage.forms[d].validations.length]={element:b,validationsCounter:f}}else{if(typeof validanguage.el[e].handlers=="undefined"){validanguage.el[e].handlers={}}if(typeof validanguage.el[e].handlers[a]=="undefined"){validanguage.el[e].handlers[a]=[];if(a=="typing"){this.addEvent(b,"keyup",function(g){validanguage.validationWrapper(g,"typingTimeout")})}else{this.addEvent(b,a,function(g){validanguage.validationWrapper(g)})}}validanguage.el[e].handlers[a][validanguage.el[e].handlers[a].length]=f}},addValidation:function(f,d,a){if(typeof a[0]=="undefined"){a=[a]}if(typeof d=="string"){d=[d]}var e=this.el[f].validations;for(var c=e.length-1;c>-1;c--){if(a[0]=="*"||this.inArray(e[c].name,a)){for(var b=d.length-1;b>-1;b--){this.addOrCreateValidationWrapper(document.getElementById(f),d[b])}}}},ajax:function(b,c){if(window.ActiveXObject){var a=new ActiveXObject("Microsoft.XMLHTTP")}else{if(window.XMLHttpRequest){var a=new XMLHttpRequest()}}a.open("POST",b,true);a.onreadystatechange=function(){if(a.readyState==4){c(a.responseText)}};a.send(null)},ajaxInit:function(){switch(this.useLibrary){case"prototype":case"scriptaculous":this.ajax=function(b,c,a){if(validanguage.empty(a)){a={}}a.onSuccess=c;new Ajax.Request(b,a)};break;case"dojo":this.ajax=function(b,c,a){if(validanguage.empty(a)){a={}}a.url=b;a.handle=c;dojo.xhrGet(a)};break;case"jquery":this.ajax=function(b,c,a){if(validanguage.empty(a)){a={}}a.url=b;a.success=c;jQuery.ajax(a)};break}},ajaxValidationWrapper:function(c,b){var a=(typeof this.formLookup[c]=="undefined")?"forms":"fields";if(this.empty(validanguage[a][c][b].dispatchedAjax)){window.clearInterval(validanguage[a][c][b].ajaxInterval)}else{for(var d in validanguage[a][c][b].dispatchedAjax){if(typeof time=="function"){continue}if(validanguage[a][c][b].dispatchedAjax[d]+(validanguage.settings.ajaxTimeout*1000)<new Date().getTime()){if(this.debug){console.log("Aborting request...")}delete this[a][c][b].failedValidations[d];if(this.empty(this[a][c][b].failedValidations)){this[a][c][b].failedValidations="callManually"}delete this[a][c][b].dispatchedAjax;if(a=="forms"&&this.validateForm(c).result===true){if(this.debug){console.log("Request Aborted.")}if(this.settings.submitFormOnExpiredAjax){this.forcedSubmission=true;document.getElementById(c).submit()}}return}}}},callToggleTransformationsOnload:function(){if(this.settings.callToggleTransformationsOnload){for(var f in this.el){if(typeof this.el[f].transformations!="undefined"){for(var e=this.el[f].transformations.length-1;e>-1;e--){if(typeof this.el[f].transformations[e].name=="undefined"){continue}var a=this.el[f].transformations[e].name;if(typeof a=="string"&&a.indexOf("validanguage.toggle")>-1){var d=this.resolveArray(a,"function");var c=d.length;for(var b=0;b<c;b++){d[b].call(document.getElementById(f))}}}}}}},concatCollection:function(f,e){var d;var a=new Array();var c=f.length;var b=e.length;for(d=0;d<c;d++){a.push(f[d])}for(d=0;d<b;d++){a.push(e[d])}return a},empty:function(e,d){if(e==null||e==undefined||e==NaN||e==="null"||(e==""&&typeof e=="string")){return true}if(d==true&&e==false){return true}if(typeof e=="object"){for(var b in e){if(typeof e[b]=="function"){continue}var c=true;for(var a in e[b]){if(e[b][a]===e){c=false}}if(c&&validanguage.empty(e[b],d)==false){return false}}return true}else{return false}},format:function(l,h,o){var n=this.value;var f=n;if(h!=null&&typeof h=="string"){var g=h.length;for(var g=h.length-1;g>-1;g--){while(n.indexOf(h.charAt(g))!=-1){n=n.replace(h.charAt(g),"","g")}}}if(this.priorStrippedValue&&(this.priorStrippedValue==n)){return}this.priorStrippedValue=n;if(o!=null){var b=(typeof o=="string")?new RegExp(o):o;var q=b.exec(n);if(q==null){return}}else{var p=l.replace(/[^x]/g,"");if(n.length!=p.length){return}}var m=validanguage.getCaretPos(this);var g=l.length;var r=n.length;var d=-1;var a="";var c=0;for(var e=0;e<g;e++){if(l.charAt(e)=="x"){c++;if(c>r){break}}a+=(l.charAt(e)=="x")?n.charAt(++d):l.charAt(e)}if(a!=f){this.value=a;if(m==f.length){m=a.length}validanguage.setCaretPos(this,m)}},getAjaxLookupIndex:function(c,a){for(var b=this.ajaxLookup[c].length-1;b>-1;b--){if(this.ajaxLookup[c][b].counter==a){return b}}return 0},getCaretPos:function(b){if(b.createTextRange&&this.browser!="opera"){if(b.nodeName.toLowerCase()=="input"){var a=document.selection.createRange().duplicate();a.moveEnd("character",b.value.length);if(a.text==""){return b.value.length}return b.value.lastIndexOf(a.text)}else{return 0}}else{return b.selectionStart}},getComments:function(a){if(!a){a=document.documentElement}var d=new Array();var b=a.childNodes.length;for(var e=0;e<b;e++){if(a.childNodes[e].nodeType==8){d[d.length]=a.childNodes[e]}else{if(a.childNodes[e].nodeType==1){d=d.concat(this.getComments(a.childNodes[e]))}}}return d},getDateTimeDefaultOptions:function(a,b){if(a==null){a={}}if(typeof a.dateOrder=="undefined"){a.dateOrder=b.dateOrder}a.dateOrder=a.dateOrder.toLowerCase();if(typeof a.allowedDelimiters=="undefined"||typeof a.allowedDelimiters!="string"){a.allowedDelimiters="./-"}if(typeof a.twoDigitYearsAllowed=="undefined"){a.twoDigitYearsAllowed=false}if(typeof a.oneDigitDaysAndMonthsAllowed=="undefined"){a.oneDigitDaysAndMonthsAllowed=true}if(typeof a.maxYear=="undefined"){a.maxYear=new Date().getFullYear()+15}if(typeof a.minYear=="undefined"){a.minYear=1900}if(typeof a.rejectDatesInTheFuture=="undefined"){a.rejectDatesInTheFuture=false}if(typeof a.rejectDatesInThePast=="undefined"){a.rejectDatesInThePast=false}if(typeof a.timeIsRequired=="undefined"){a.timeIsRequired=false}if(typeof a.timeUnits=="undefined"){a.timeUnits="hms"}if(typeof a.microsecondPrecision=="undefined"){a.microsecondPrecision=6}return a},getElSetting:function(a,e,d){var b=this.getFormSettings(e);var c=b[a];if(typeof d!="undefined"&&typeof d[a]!="undefined"){c=d[a]}else{if(typeof this.el[e][a]!="undefined"){c=this.el[e][a]}}return c},getFormSettings:function(b){var a=(document.getElementById(b).nodeName.toLowerCase()=="form")?b:this.formLookup[b];return this.forms[a].settings},getSettingFromComment:function(i,e){var d=" "+i+"=";var g=e.indexOf(d);if(g==-1){return null}var a=(g*1)+(d.length*1);var c="\\"+e.charAt(a);var f=d+c+"(.+?)"+c;var b=new RegExp(f);var h=b.exec(e,"gi");if(h==null){return null}else{if(h[1]){if(h[1]=="true"){h[1]=true}if(h[1]=="false"){h[1]=false}return h[1]}}},hideError:function(){var b=validanguage.getFormSettings(this.id);var a=document.getElementById(this.id+b.errorMsgSpanSuffix);if(a!=null){a.innerHTML="";var c=a.parentNode;c.style.display="none";c.className=b.noErrorClassName}if(!this.className.match(validanguage.settings.passedFieldClassName)){this.className+=" "+validanguage.settings.passedFieldClassName}if(this.className.match(validanguage.settings.failedFieldClassName)){this.className=this.className.replace(validanguage.settings.failedFieldClassName,"")}if(!b.showFailedFields){return}if(document.getElementById(this.id+b.errorListItemSuffix)!=null){var d=document.getElementById(b.errorListId);d.removeChild(document.getElementById(this.id+b.errorListItemSuffix));if(d.getElementsByTagName("LI").length==0){document.getElementById(b.errorDivId).style.display="none"}}},inArray:function(c,b){for(var a=b.length-1;a>-1;a--){if(b[a]===c){return true}}return false},inheritIfDefined:function(b,e,a,d){if(typeof e.length=="undefined"){return false}for(var c=e.length-1;c>-1;c--){if(typeof b[e[c]]!="undefined"&&(this.empty(d)||typeof b[e[c]]==d)){a[e[c]]=b[e[c]]}}},init:function(){if(typeof validanguageLibrary!="undefined"){this.useLibrary=validanguageLibrary}this.addEventInit();this.ajaxInit();this.addEvent(window,"load",function(){validanguage.populate.call(validanguage)})},insertAfter:function(a,b){if(b.nextSibling){if(b.nextSibling.nodeName.toLowerCase()=="label"){b.parentNode.insertBefore(a,b.nextSibling.nextSibling)}else{b.parentNode.insertBefore(a,b.nextSibling)}}else{b.parentNode.appendChild(a)}},isExpiredAjax:function(c,b){if(this.empty(c)||this.empty(b)){return false}var e=this.getAjaxLookupIndex(c,b);var a=this.ajaxLookup[c];var f=a[e].eventType;for(var d=a.length-1;d>0;d--){if(f==a[d].eventType){if(a[d].counter==b){return false}else{return true}}}return false},loadCommentAPI:function(i){var e=["mode","expression","suppress","onsubmit","onblur","onchange","onkeypress","onkeyup","onkeydown","onclick","ontyping","errorMsg","onerror","onsuccess","focusOnError","showAlert","required","requiredAlternatives","maxlength","minlength","regex","field","errorOnMatch","modifiers","transformations","validations"];var p=(this.empty(i))?this.getComments():i;var c=p.length;for(var r=0;r<c;r++){var o=(this.empty(i))?p[r].nodeValue:p[r];var t=o.split(validanguage.settings.commentDelimiter);var d=t.length;for(var v=0;v<d;v++){var m=t[v];m=m.replace(/\n/g," ");m=m.replace(/\r/g," ");var f=/<validanguage/i;if(f.test(m)){var w=this.getSettingFromComment("target",m);var s=[];if(this.empty(w,true)){continue}w=this.resolveArray(w,"string");for(var q=e.length-1;q>-1;q--){var b=this.getSettingFromComment(e[q],m);if(!(b==null||(typeof b=="string"&&b==""))){s[e[q]]=b}}q=w.length;for(var n=0;n<q;n++){var h=w[n];var g=document.getElementById(h);if(typeof this.el[h]=="undefined"||g==null){this.el[h]={}}if(typeof s.expression!="undefined"){this.el[h].characters={};this.inheritIfDefined(s,["expression","errorMsg","mode","suppress","onerror","onsuccess"],this.el[h].characters);this.inheritIfDefined(s,this.supportedEventHandlers,this.el[h].characters)}if(typeof s.regex!="undefined"){this.el[h].regex={expression:s.regex};this.inheritIfDefined(s,["errorOnMatch","modifiers"],this.el[h].regex);this.inheritIfDefined(s,this.supportedEventHandlers,this.el[h].regex)}this.inheritIfDefined(s,this.supportedEventHandlers,this.el[h],"string");this.inheritIfDefined(s,["minlength","maxlength","requiredAlternatives","required","focusOnError","showAlert","onsuccess","onerror","errorMsg"],this.el[h]);if(typeof s.minlength!="undefined"){this.el[h].minlengthEvents={};this.inheritIfDefined(s,this.supportedEventHandlers,this.el[h].minlengthEvents)}if(typeof s.maxlength!="undefined"){this.el[h].maxlengthEvents={};this.inheritIfDefined(s,this.supportedEventHandlers,this.el[h].maxlengthEvents)}if(typeof s.required!="undefined"){this.el[h].requiredEvents={};this.inheritIfDefined(s,this.supportedEventHandlers,this.el[h].requiredEvents)}if(typeof this.el[h].validations=="undefined"){this.el[h].validations=[]}if(typeof this.el[h].transformations=="undefined"){this.el[h].transformations=[]}var u=["focusOnError","showAlert","onsuccess","onerror","errorMsg","isAjax"];if(typeof s.validations!="undefined"&&!this.empty(s.validations)){this.el[h].validations[this.el[h].validations.length]={};this.el[h].validations[this.el[h].validations.length-1].name=s.validations;this.inheritIfDefined(s,this.supportedEventHandlers,this.el[h].validations[this.el[h].validations.length-1]);this.inheritIfDefined(s,u,this.el[h].validations[this.el[h].validations.length-1])}if(typeof s.transformations!="undefined"&&!this.empty(s.transformations)){this.el[h].transformations[this.el[h].transformations.length]={};this.el[h].transformations[this.el[h].transformations.length-1].name=s.transformations;this.inheritIfDefined(s,this.supportedEventHandlers,this.el[h].transformations[this.el[h].transformations.length-1])}}}}}},loadElAPI:function(){for(var D in this.el){try{if(typeof document.getElementById(D)==undefined||this.empty(document.getElementById(D))){continue}}catch(B){continue}var A=document.getElementById(D);var C=validanguage.getFormSettings(D);if(typeof this.el[D].validations=="undefined"){this.el[D].validations=[]}if(typeof this.el[D].field=="undefined"){this.el[D].field=D}if(typeof this.el[D].required!="undefined"&&this.el[D].required==true){this.el[D].validations[this.el[D].validations.length]={};this.el[D].validations[this.el[D].validations.length-1].name="validanguage.validateRequired";this.el[D].validations[this.el[D].validations.length-1].errorMsg=(typeof this.el[D].errorMsg=="undefined")?C.requiredErrorMsg:this.el[D].errorMsg;this.inheritIfDefined(this.el[D],this.supportedEventHandlers,this.el[D].validations[this.el[D].validations.length-1]);if(typeof this.el[D]["requiredEvents"]!="undefined"){this.inheritIfDefined(this.el[D]["requiredEvents"],this.supportedEventHandlers,this.el[D].validations[this.el[D].validations.length-1])}if(C.validateRequiredAlternativesOnclick==true&&typeof this.el[D].requiredAlternatives!="undefined"){var x=(typeof this.el[D].onsuccess!="undefined")?this.el[D].onsuccess:C.onsuccess;var f=(typeof this.el[D].onerror!="undefined")?this.el[D].onerror:C.onerror;var d=this.resolveArray(this.el[D].requiredAlternatives,"string");for(var m=d.length-1;m>-1;m--){this.requiredAlternatives[d[m]]={};if(!((typeof document.getElementById(d[m]).type!="undefined")&&(document.getElementById(d[m]).type=="checkbox"||document.getElementById(d[m]).type=="radio"))){continue}this.requiredAlternatives[d[m]].onsuccess=x;this.requiredAlternatives[d[m]].onerror=f;this.requiredAlternatives[d[m]].errorMsg=(typeof this.el[D].errorMsg=="undefined")?C.requiredErrorMsg:this.el[D].errorMsg;this.requiredAlternatives[d[m]].parentId=D;this.addEvent(document.getElementById(d[m]),"click",function(h){validanguage.validateRequiredAlternatives(h)})}}}if(typeof this.el[D].regex!="undefined"){this.el[D].validations[this.el[D].validations.length]={};this.el[D].validations[this.el[D].validations.length-1].name="validanguage.validateRegex";var c=(typeof this.el[D].errorMsg=="undefined")?C.errorMsg:this.el[D].errorMsg;if(typeof this.el[D].regex.errorMsg!="undefined"){c=this.el[D].regex.errorMsg}this.el[D].validations[this.el[D].validations.length-1].errorMsg=c;this.inheritIfDefined(this.el[D],this.supportedEventHandlers,this.el[D].validations[this.el[D].validations.length-1]);this.inheritIfDefined(this.el[D].regex,this.supportedEventHandlers,this.el[D].validations[this.el[D].validations.length-1]);if(typeof this.el[D].regex.errorOnMatch=="undefined"){this.el[D].regex.errorOnMatch=C.errorOnMatch}}if(typeof this.el[D].maxlength!="undefined"){this.el[D].validations[this.el[D].validations.length]={};this.el[D].validations[this.el[D].validations.length-1].name="validanguage.validateMaxlength";this.el[D].validations[this.el[D].validations.length-1].errorMsg=C.maxlengthErrorMsg.replace("{!maxlength}",this.el[D].maxlength);if(typeof this.el[D]["maxlengthEvents"]!="undefined"){this.inheritIfDefined(this.el[D]["maxlengthEvents"],this.supportedEventHandlers,this.el[D].validations[this.el[D].validations.length-1])}}if(typeof this.el[D].minlength!="undefined"){this.el[D].validations[this.el[D].validations.length]={};this.el[D].validations[this.el[D].validations.length-1].name="validanguage.validateMinlength";this.el[D].validations[this.el[D].validations.length-1].errorMsg=C.minlengthErrorMsg.replace("{!minlength}",this.el[D].minlength);if(typeof this.el[D]["minlengthEvents"]!="undefined"){this.inheritIfDefined(this.el[D]["minlengthEvents"],this.supportedEventHandlers,this.el[D].validations[this.el[D].validations.length-1])}}if(typeof this.el[D].characters!="undefined"&&typeof this.el[D].characters.mode!="undefined"&&typeof this.el[D].characters.expression!="undefined"){var p=this.el[D].characters.expression;p=p.replace("alphaUpper","ABCDEFGHIJKLMNOPQRSTUVWXYZ");p=p.replace("alphaLower","abcdefghijklmnopqrstuvwxyz");p=p.replace("alpha","abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");p=p.replace("numeric","0123456789");this.el[D].characters.characterExpression=p;var b=";";for(var u=p.length-1;u>-1;u--){b+=p.charCodeAt(u)+";"}this.el[D].characters.expression=b;if(typeof this.el[D].characters.suppress=="undefined"||this.el[D].characters.suppress==true){this.addEvent(A,"keypress",validanguage.validateKeypress)}this.el[D].validations[this.el[D].validations.length]={};this.el[D].validations[this.el[D].validations.length-1].name="validanguage.validateCharacters";this.el[D].validations[this.el[D].validations.length-1].errorMsg=true;for(var g=this.supportedEventHandlers.length-1;g>-1;g--){if(typeof this.el[D].characters[this.supportedEventHandlers[g]]!="undefined"&&this.el[D].characters[this.supportedEventHandlers[g]]==true){this.el[D].validations[this.el[D].validations.length-1][this.supportedEventHandlers[g]]=true}}if(typeof this.el[D].characters.errorMsg!="undefined"){this.el[D].validations[this.el[D].validations.length-1].errorMsg=this.el[D].characters.errorMsg}else{this.el[D].validations[this.el[D].validations.length-1].errorMsg=C.characterValidationErrorMsg}}if(typeof this.el[D].transformations=="undefined"){this.el[D].transformations=[]}var u=this.supportedEventHandlers.length;for(var t=0;t<u;t++){var a=this.supportedEventHandlers[t];if(typeof this.el[D][a]!="undefined"&&typeof this.el[D][a]!="boolean"){this.el[D].transformations[this.el[D].transformations.length]={};var q=this.el[D].transformations.length-1;this.el[D].transformations[q].name=this.el[D][a];this.el[D].transformations[q][a]=true}}var w=this.el[D].transformations.length;for(var v=0;v<w;v++){var o=false;var u=this.supportedEvents.length;for(var t=0;t<u;t++){if(this.supportedEvents[t]=="submit"){continue}if(typeof this.el[D].transformations[v]["on"+this.supportedEvents[t]]!="undefined"&&this.el[D].transformations[v]["on"+this.supportedEvents[t]]==true){o=true;this.addOrCreateValidationWrapper(A,this.supportedEvents[t])}}if(o==false){if(A.nodeName.toLowerCase()=="form"){this.addOrCreateValidationWrapper(A,"submit")}else{for(var s=C.defaultTransformationHandlers.length-1;s>-1;s--){this.addOrCreateValidationWrapper(A,C.defaultTransformationHandlers[s],999)}}}}if(typeof this.el[D].validations!="undefined"){var w=this.el[D].validations.length-1;ajaxLoop:for(var v=0;v<w;v++){if(this.el[D].validations[v].isAjax){var r=this.el[D].validations[v];this.el[D].validations.splice(v,1);this.el[D].validations.push(r);break ajaxLoop}}var w=this.el[D].validations.length;for(var v=0;v<w;v++){var o=false;var u=this.supportedEvents.length;for(var t=0;t<u;t++){if(typeof this.el[D].validations[v]["on"+this.supportedEvents[t]]!="undefined"&&this.el[D].validations[v]["on"+this.supportedEvents[t]]===true){o=true;this.addOrCreateValidationWrapper(A,this.supportedEvents[t],v)}}if(o==false){for(var s=C.defaultValidationHandlers.length-1;s>-1;s--){this.addOrCreateValidationWrapper(A,C.defaultValidationHandlers[s],v)}}}}}},parseSubstring:function(a,g,d){var e=[];var f=d.split(a);for(var c=0;c<f.length;c++){var b=f[c].indexOf(g);if(b!=-1){e.push(f[c].substring(0,b))}}return e},populate:function(){this.sniffBrowser();if(this.browser=="ie5"){return}if(typeof console=="undefined"){this.debug=false}var b=document.getElementsByTagName("form");for(var f=0,e=b.length;f<e;f++){var m=(this.empty(b[f].id))?f:b[f].id;this.forms[m]={settings:this.settings};var l=b[f].getElementsByTagName("input");var c=b[f].getElementsByTagName("textarea");var a=b[f].getElementsByTagName("select");var g=this.concatCollection(l,c);var g=this.concatCollection(g,a);var h={};for(var d=g.length-1;d>-1;d--){if(typeof(g[d].id)!="undefined"&&!this.empty(g[d].id)){this.formLookup[g[d].id]=m}}}if(this.browser=="konqueror"&&this.settings.loadCommentAPI==true){this.ajax(document.location.href,function(i){if(i.responseText){i=i.responseText}var j=validanguage.parseSubstring("<!--","-->",i);validanguage.loadCommentAPI(j);if(validanguage.overloadFormSettings){validanguage.overloadFormSettings()}if(validanguage.el&&!validanguage.empty(validanguage.el)){validanguage.loadElAPI();if(validanguage.callToggleTransformationsOnload){validanguage.callToggleTransformationsOnload()}validanguage.settings.onload.call(validanguage);validanguage.vdLoaded=true}})}else{if(this.settings.loadCommentAPI==true){this.loadCommentAPI()}if(this.overloadFormSettings){this.overloadFormSettings()}if(this.el&&!this.empty(this.el)){this.loadElAPI()}if(this.callToggleTransformationsOnload){this.callToggleTransformationsOnload()}this.settings.onload.call(this);this.vdLoaded=true}this.addEvent(window,"unload",function(){delete validanguage})},removeValidation:function(h,d,a){if(d=="*"){d=this.supportedEvents}else{if(typeof d[0]=="undefined"){d=[d]}}if(typeof a=="string"){a=[a]}for(var b=d.length-1;b>-1;b--){if(d[b]=="submit"){var f=this.forms[this.formLookup[h]].validations;formValLoop:for(var c=f.length-1;c>-1;c--){if(f[c]==undefined||f[c].element.id!=h){continue formValLoop}if(a[0]=="*"||this.inArray(this.el[h].validations[f[c].validationsCounter].name,a)){try{delete f[c]}catch(g){}}}}else{var f=this.el[h].validations;for(var c=f.length-1;c>-1;c--){if(a[0]=="*"||this.inArray(f[c].name,a)){try{delete this.el[h].handlers[d[b]][c]}catch(g){}}}}}},resolveArray:function(args,returnType,ignoreCommas){var returnArray=[];if(typeof args=="object"){var i=args.length;for(var j=0;j<i;j++){returnArray[returnArray.length]=this.resolveArray(args[j],returnType)[0]}return returnArray}if(typeof args=="function"){returnArray[0]=args;return returnArray}if(typeof args=="string"){if(returnType=="string"){args=args.replace(" ","")}if(args.indexOf(",")==-1||ignoreCommas==true){if(returnType=="function"){if(args.indexOf("(")!=-1&&args.indexOf("function")==-1){var splitAt=args.indexOf("(");var funcName=args.substring(0,splitAt);var params=args.substring(++splitAt,args.length);var args="function(text) { return "+funcName+".call(this,"+params+"}"}eval("var argsHandle="+args);returnArray[returnArray.length]=argsHandle}else{returnArray[returnArray.length]=args}}else{var tempArray=this.smartCommaSplit(args);var i=tempArray.length;if(i==1){returnArray=this.resolveArray(tempArray[0],returnType,true)}else{for(var j=0;j<i;j++){returnArray[returnArray.length]=this.resolveArray(tempArray[j],returnType)[0]}}}return returnArray}return false},setCaretPos:function(b,c){if(b.createTextRange&&this.browser!="opera"){var a=b.createTextRange();a.move("character",c);a.select()}else{if(b.selectionStart){b.focus();b.setSelectionRange(c,c)}}},setValidationStatus:function(g,f,c,e){if(c==undefined){c="submit"}else{if(!this.inArray(c,this.supportedEvents)){var b=this.getAjaxLookupIndex(g,c);c=(this.ajaxLookup[g][b].eventType)?this.ajaxLookup[g][b].eventType:"submit"}}var a=(c=="submit")?"forms":"fields";var d=(c=="submit")?validanguage.formLookup[g]:g;if(this.debug){console.log("setValidationStatus for "+g+". Pending requests before deleting:");console.dir(this[a][d][c].dispatchedAjax);console.dir(this[a][d][c].failedValidations)}if(typeof this[a][d][c].failedValidations[g]=="undefined"){if(this.debug){console.log("Exiting setValidationStatus for aborted request")}}if(f===false){if(!this.empty(e)){this[a][d][c].failedValidations[g].errorMsg=e}}else{delete this[a][d][c].failedValidations[g];if(this.empty(this[a][d][c].failedValidations)){this[a][d][c].failedValidations="callManually"}}delete this[a][d][c].dispatchedAjax[g];if(typeof b!="undefined"){this.ajaxLookup[g][b].result=f;if(!this.empty(e)){this.ajaxLookup[g][b].errorMsg=e}}if(this.debug){console.log("Pending requests after deleting:");console.dir(this[a][d][c].dispatchedAjax);console.log("Failed validations:");console.dir(this[a][d][c].failedValidations)}if(a=="forms"&&this.empty(this[a][d][c].dispatchedAjax)&&this.validateForm(d).result===true){if(this.debug){console.log("Form Submitted")}validanguage.forcedSubmission=true;document.getElementById(d).submit()}else{if(a=="fields"&&this.empty(this[a][d][c].dispatchedAjax)){if(this.debug){console.log("Throwing Event")}this.validationWrapper(g,c)}}},showError:function(g){var d=validanguage.getFormSettings(this.id);var b=document.getElementById(this.id+d.errorMsgSpanSuffix);if(b==null){var j=document.getElementById(this.id);var f=document.createElement("DIV");validanguage.insertAfter(f,j);var h='<span id="'+this.id+d.errorMsgSpanSuffix+'">&nbsp;</span>';f.innerHTML=h;f.className=d.onErrorClassName;var b=document.getElementById(this.id+d.errorMsgSpanSuffix)}else{var f=b.parentNode;f.style.display="block";f.className=d.onErrorClassName}if(validanguage.useLibrary=="scriptaculous"){new Effect.Highlight(f,{startcolor:"#A85F5F",endcolor:"#C0A6A6",restorecolor:"#ddd"})}b.innerHTML=g;if(!this.className.match(validanguage.settings.failedFieldClassName)){this.className+=" "+validanguage.settings.failedFieldClassName}if(this.className.match(validanguage.settings.passedFieldClassName)){this.className=this.className.replace(validanguage.settings.passedFieldClassName,"")}if(!d.showFailedFields){return}if(document.getElementById(d.errorDivId)==null){var f=document.createElement("DIV");f.id=d.errorDivId;document.body.appendChild(f)}else{var f=document.getElementById(d.errorDivId)}if(document.getElementById(d.errorListId)==null){f.innerHTML=d.errorListText+'<br/><ul id="'+d.errorListId+'"></ul>'}var e=f.innerHTML.toLowerCase();e=e.replace(/"/g,"");var c=document.getElementById(d.errorListId);var a='<li id="'+this.id+d.errorListItemSuffix+'">'+validanguage.el[this.id].field+"</li>";var i=a.toLowerCase();i=i.replace(/"/g,"");if(e.indexOf(i)==-1){c.innerHTML+=a}document.getElementById(d.errorDivId).style.display="block"},showSubmitMessage:function(b,f){if(b==false){return}var d=validanguage.forms[this.id].settings;var a=this.getElementsByTagName("INPUT");for(var c=a.length-1;c>-1;c--){if(typeof a[c].type!="undefined"&&a[c].type=="submit"){validanguage.forms.submitButton=submitButton=a[c];break}}submitButton.style.display="none";var e=document.createElement("DIV");e.id=d.showSubmitMessageId;e.innerHTML=d.showSubmitMessageMessage;validanguage.insertAfter(e,a[c]);setTimeout(function(){validanguage.forms.submitButton.style.display="inline"},60000)},smartCommaSplit:function(g){var d=0;var e=0;var b=0;var f=[];var a=g.length;for(var c=0;c<a;c++){switch(g.charAt(c)){case"(":d++;break;case")":d--;break;case"{":e++;break;case"}":e--;break;case",":if(d==0&&e==0){f[f.length]=g.substring(b,c);b=++c}break}}f[f.length]=g.substring(b,c);return f},sniffBrowser:function(){var isIE
/*@cc_on=1@*/
;if(isIE){this.browser="ie";var version=parseFloat(navigator.appVersion.split("MSIE")[1]);if(version<6){this.browser="ie5"}}else{if(navigator.appName.indexOf("Opera")!=-1){this.browser="opera"}else{if(navigator.vendor.indexOf("Apple")!=-1){this.browser="safari"}else{if(navigator.vendor.indexOf("KDE")!=-1){this.browser="konqueror"}else{this.browser="ff"}}}}},substituteText:function(f,a){var b=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var e=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];if(f==="lower"||validanguage.empty(f)){f=b}else{if(f==="upper"){f=e}}if(a==="lower"||validanguage.empty(a)){a=e}else{if(a==="upper"){a=e}}var d=this.value;var h=validanguage.getCaretPos(this);for(var c=f.length-1;c>-1;c--){var g=new RegExp(f[c],"g");d=d.replace(g,a[c])}this.value=d;validanguage.setCaretPos(this,h)},toggle:function(l){var t=l.length;var w=validanguage.getFormSettings(this.id);var s=validanguage.formLookup[this.id];for(var u=0;u<t;u++){var g=l[u];var x=validanguage.resolveArray(g.target,"string");var m=false;if(this.nodeName.toLowerCase()=="input"&&this.type.toLowerCase()=="radio"){var d=false;var c=false;for(var r=document.forms.length-1;r>-1;r--){if(document.forms[r].id==s){c=document.forms[r][this.name];break}}for(var r=c.length-1;r>-1;r--){if(c[r].checked){d=true}}if(!d){m=true}}if(g.toggle){var b=(g.toggle.visible)?validanguage.toggleCriteriaMet(this,g.toggle.visible,w):false;var e=(g.toggle.hidden)?validanguage.toggleCriteriaMet(this,g.toggle.hidden,w):false;for(var r=x.length-1;r>-1;r--){if(b&&!m){validanguage.toggleDisplay(x[r],"")}if(e||(w.toggleVisibilityDefaultsToHidden&&!b)){validanguage.toggleDisplay(x[r],"none")}}}if(typeof g.toggleAttribute!="undefined"){for(var r=x.length-1;r>-1;r--){var h=g.toggleAttribute.attribute;var p=g.toggleAttribute.value;if(g.toggleAttribute.condition=="checked"&&this.checked==true){document.getElementById(x[r])[h]=p}else{if(g.toggleAttribute.condition=="unchecked"&&this.checked==false){document.getElementById(x[r])[h]=p}else{if((this.value)&&(g.toggleAttribute.condition==this.value)){document.getElementById(x[r])[h]=p}}}}}if(typeof g.values!="undefined"){for(var r=x.length-1;r>-1;r--){if(typeof g.values.checked!="undefined"&&this.checked==true){document.getElementById(x[r]).value=g.values.checked}else{if(typeof g.values.unchecked!="undefined"&&this.checked==false){document.getElementById(x[r]).value=g.values.unchecked}else{if(typeof g.values[this.value]!="undefined"){document.getElementById(x[r]).value=g.values[this.value]}}}}}if(typeof g.dynamicSelect!="undefined"){var f=this.value;if(typeof validanguage.el[this.id]["value"]!="undefined"&&validanguage.el[this.id]["value"]==f){return}var q=document.getElementById(x[0]);for(var o in g.dynamicSelect){if(typeof g.dynamicSelect[o]=="object"){var n=g.dynamicSelect[o];if(o==this.value){while(q.options.length>0){q.remove(0)}for(var v in n){if(v=="_default"){continue}var a=document.createElement("option");a.value=v;a.text=n[v];q.options.add(a)}if(typeof n._default!="undefined"){q.value=n._default}}}}validanguage.el[this.id]["value"]=f}}},toggleCriteriaMet:function(b,c,a){if(c=="checked"){return !!(b.checked)}else{if(c=="unchecked"){return !(b.checked)}else{if(c=="empty"){return !!(validanguage.inArray(b.value,a.emptyOptionElements))}else{if(c=="notEmpty"){return !(validanguage.inArray(b.value,a.emptyOptionElements))}else{return !!(b.value==c)}}}}},toggleDisplay:function(d,c){var e=document.getElementById(d);var h=e.nodeName.toLowerCase();if(c==null||c==undefined){c=(e.style.display=="none")?"":"none"}disabledBool=(c=="none")?true:false;e.style.display=c;if(h=="input"||h=="textarea"||h=="select"){e.disabled=disabledBool;return}var j=e.getElementsByTagName("input");var b=e.getElementsByTagName("textarea");var a=e.getElementsByTagName("select");var g=this.concatCollection(j,b);var g=this.concatCollection(g,a);for(var f=g.length-1;f>-1;f--){g[f].disabled=disabledBool}},validateCharacters:function(e){var f=this.id;var d=validanguage.el[f].characters.mode;var c=validanguage.el[f].characters.characterExpression;switch(d){case"allow":outerLoop:for(var b=e.length-1;b>-1;b--){innerLoop:for(var a=c.length-1;a>-1;a--){if(c.charAt(a)==e.charAt(b)){continue outerLoop}}return false}break;case"deny":outerLoop:for(var b=e.length-1;b>-1;b--){innerLoop:for(var a=c.length-1;a>-1;a--){if(c.charAt(a)==e.charAt(b)){return false}}}break}return true},validateCreditCard:function(k,c,d){if(validanguage.empty(c)){c=["amex","disc","mc","visa"]}var k=k.replace(/\D/g,"");var b={amex:"^3[4|7]\\d{13}$",bankcard:"^56(10\\d\\d|022[1-5])\\d{10}$",diners:"^(?:3(0[0-5]|[68]\\d)\\d{11})|(?:5[1-5]\\d{14})$",disc:"^(?:6011|650\\d)\\d{12}$",electron:"^(?:417500|4917\\d{2}|4913\\d{2})\\d{10}$",enroute:"^2(?:014|149)\\d{11}$",jcb:"^(3\\d{4}|2100|1800)\\d{11}$",maestro:"^(?:5020|6\\d{3})\\d{12}$",mc:"^5[1-5]\\d{14}$",solo:"^(6334[5-9][0-9]|6767[0-9]{2})\\d{10}(\\d{2,3})?$","switch":"^(?:49(03(0[2-9]|3[5-9])|11(0[1-2]|7[4-9]|8[1-2])|36[0-9]{2})\\d{10}(\\d{2,3})?)|(?:564182\\d{10}(\\d{2,3})?)|(6(3(33[0-4][0-9])|759[0-9]{2})\\d{10}(\\d{2,3})?)$",visa:"^4\\d{12}(\\d{3})?$",voyager:"^8699[0-9]{11}$"};var e=false;for(var g=c.length;g--;g>-1){e=validanguage.validateRegex(k,{expression:b[c[g]]});if(e){break}}if(!e){return false}if(d===false){return true}var a=k.length;var f=a%2;var j=0;for(var g=0;g<a;g++){var h=k.charAt(g);if(g%2==f){h=h*2;if(h>9){h=h-9}}j=j+parseInt(h)}if(j%10==0){return true}else{return false}},validateDate:function(p,r){r=validanguage.getDateTimeDefaultOptions(r,{dateOrder:"ymd"});var c;var m="(";for(var g=r.allowedDelimiters.length-1;g>-1;g--){m+="\\"+r.allowedDelimiters.charAt(g);if(g>0){m+="|"}if(p.indexOf(r.allowedDelimiters.charAt(g))>-1){c=r.allowedDelimiters.charAt(g)}}m+=")";if(c==null){return false}var d=p.split(c);if(d.length!=3){return false}var o="^";for(var e=0;e<3;e++){switch(r.dateOrder.charAt(e)){case"y":var h=(r.twoDigitYearsAllowed)?"{2,4}":"{4}";o+="\\d"+h;break;case"m":case"d":var h=(r.oneDigitDaysAndMonthsAllowed)?"{1,2}":"{2}";o+="\\d"+h;break}if(e<2){o+=m}}o+="$";var b=new RegExp(o);var q=b.exec(p);if(q==null){return false}var l=d[r.dateOrder.indexOf("y")];var k=d[r.dateOrder.indexOf("m")];var n=d[r.dateOrder.indexOf("d")];if(l.length==3){return false}if((l<r.minYear&&l.length==4)||(l>r.maxYear)){return false}if(!validanguage.validateDateExists(l,k,n)){return false}if(r.rejectDatesInTheFuture||r.rejectDatesInThePast){var a=new Date();var f=new Date();f.setDate(n);f.setMonth(--k);f.setFullYear(l);if((r.rejectDatesInTheFuture&&f>a)||(r.rejectDatesInThePast&&f<a)){return false}}return true},validateDateExists:function(c,e,a){if(c.length==2){var d=(c>20)?"19":"20";c=d+c.toString()}if(e.charAt(0)=="0"){e=e.substr(1,1)}if(a.charAt(0)=="0"){a=a.substr(1,1)}if(e<0||e>12){return false}switch(e.toString()){case"4":case"6":case"9":case"11":var b=30;break;case"2":var b=((c%4==0)&&((!(c%100==0))||(c%400==0)))?29:28;break;default:var b=31}if(a<0||a>b){return false}return true},validateEmail:function(a){if(!a.match(/^([a-zA-Z0-9]+[a-zA-Z0-9._%-]*@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,4})$/)){return false}else{return true}},validateForm:function(b){var a;if(b==undefined){a=document.forms[0]}else{if(typeof b=="string"){a=document.getElementById(b)}else{a=b}}return this.validationWrapper(a,"validateForm")},validateIP:function(c){var a=c.split(".");if(a.length==4){for(var b=a.length-1;b>-1;b--){if(!(validanguage.validateNumeric(a[b])&&a[b]>=0&&a[b]<=255)){return false}}return true}return false},validateKeypress:function(f){var a=f||window.evt;var d=a.currentTarget||a.srcElement;var h=d.id;var b=validanguage.formLookup[h];var c=validanguage.getFormSettings(h);if(validanguage.browser=="ie"||validanguage.browser=="opera"){charCode=a.keyCode;if(((charCode==16)&&(a.shiftKey))||(a.ctrlKey)){return true}if(a.which==0){return true}}else{if((a.charCode==0)||(a.ctrlKey)){return true}charCode=a.which}charCode+=";";searchString=new String(validanguage.el[h].characters.expression);var g=validanguage.el[h].characters.mode;if(((searchString.search(charCode)!=-1)&&(g=="allow"))||((searchString.search(charCode)==-1)&&(g=="deny"))){return true}else{d.style.backgroundColor=c.validationErrorColor;setTimeout("document.getElementById('"+h+"').style.backgroundColor = validanguage.forms['"+b+"'].settings.normalTextboxColor",validanguage.forms[b].settings.timeDelay);a.returnValue=false;if(a.preventDefault){a.preventDefault()}return false}},validateMaxlength:function(c,a){var d=this.id;var b=(validanguage.empty(a))?validanguage.el[d].maxlength:a;if(c.length>b){return false}else{return true}},validateMinlength:function(c,a){var d=this.id;var b=(validanguage.empty(a))?validanguage.el[d].minlength:a;if(c.length<b){return false}else{return true}},validateNumeric:function(a){if(!a.match(/^\d+$/)){return false}else{return true}},validateRegex:function(d,c){var g=this.id;var a=(validanguage.empty(c))?validanguage.el[g].regex:c;if(typeof a.modifiers=="undefined"){a.modifiers=""}if(typeof a.errorOnMatch=="undefined"){a.errorOnMatch=false}var f=(typeof a.expression=="string")?new RegExp(a.expression):a.expression;var b=f.exec(d,a.modifiers);if(b==null){var e=(a.errorOnMatch==false||a.errorOnMatch=="false")?false:true}else{var e=(a.errorOnMatch==false||a.errorOnMatch=="false")?true:false}return e},validateRequired:function(a){var g=this.id;if(typeof validanguage.el[g].requiredAlternatives=="undefined"){var e=[g]}else{var e=validanguage.resolveArray(validanguage.el[g].requiredAlternatives,"string");e[e.length]=g}for(var b=e.length-1;b>-1;b--){g=e[b];var d=document.getElementById(g);var f=d.value;var c=validanguage.validateRequiredChild.call(d,f);if(c==true){return true}}return false},validateRequiredAlternatives:function(d){var i=d||window.evt;var f=i.currentTarget||i.srcElement;var a=f.id;var c=validanguage.requiredAlternatives[a].parentId;var j=validanguage.requiredAlternatives[a].onsuccess;var g=validanguage.requiredAlternatives[a].onerror;var h=document.getElementById(c);if(validanguage.validateRequired.call(h)==true){successHandlers=validanguage.resolveArray(j,"function");for(var b=successHandlers.length-1;b>-1;b--){successHandlers[b].call(h)}}else{errorHandlers=validanguage.resolveArray(g,"function");for(var b=errorHandlers.length-1;b>-1;b--){errorHandlers[b].call(h,validanguage.requiredAlternatives[a].errorMsg)}}},validateRequiredChild:function(d){var b=(typeof this.type!="undefined")?this.type:null;if(this.nodeName.toLowerCase()=="textarea"){b="text"}if(this.nodeName.toLowerCase()=="select"){b="select"}switch(b){case"checkbox":if(this.checked==false){return false}break;case"radio":var c=validanguage.formLookup[this.id];var e=(typeof c=="number")?document.forms[c][this.name]:document.getElementById(c)[this.name];for(var a=e.length-1;a>-1;a--){if(e[a].checked==true){return true}}return false;break;case"text":case"password":case"file":if(validanguage.empty(d)){return false}break;case"select":if(validanguage.empty(d)){return false}settings=validanguage.getFormSettings(this.id);for(var a=settings.emptyOptionElements.length-1;a>-1;a--){if(d==settings.emptyOptionElements[a]){return false}}break}return true},validateTimestamp:function(g,j){j=validanguage.getDateTimeDefaultOptions(j,{dateOrder:"ymd"});var d=g.indexOf(" ");var c=(d==-1)?g:g.substr(0,d);if(!validanguage.validateDate(c,j)){return false}if(d!=-1){var b=g.substring(++d)}else{if(!j.timeIsRequired){return true}if(j.timeIsRequired){return false}}var e="^\\d{1,2}:\\d{1,2}";if(j.timeUnits.indexOf("s")!=-1){e+="(:\\d{1,2}"}if(j.timeUnits.indexOf("u")!=-1){e+="(\\.\\d{1,"+j.microsecondPrecision+"})?"}if(j.timeUnits.indexOf("s")!=-1){e+=")?"}if(j.timeUnits.indexOf("t")!=-1){e+="( ?[\\+|\\-]{1,1}(\\d|0\\d|10|11|12|13)(\\:(00|30))?)?"}e+="$";var a=new RegExp(e);var i=a.exec(b);if(i==null){return false}var h=b.split(":");if(h[0]>23){return false}if(h[1]>59){return false}if(h.length>2){var f=h[2].substr(0,2);if(f>59){return false}}return true},validateURL:function(a){if(!a.match(/^((([hH][tT][tT][pP][sS]?|[fF][tT][pP])\:\/\/)?([\w\.\-]+(\:[\w\.\&%\$\-]+)*@)?((([^\s\(\)\<\>\\\"\.\[\]\,@;:]+)(\.[^\s\(\)\<\>\\\"\.\[\]\,@;:]+)*(\.[a-zA-Z]{2,4}))|((([01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}([01]?\d{1,2}|2[0-4]\d|25[0-5])))(\b\:(6553[0-5]|655[0-2]\d|65[0-4]\d{2}|6[0-4]\d{3}|[1-5]\d{4}|[1-9]\d{0,3}|0)\b)?((\/[^\/][\w\.\,\?\'\\\/\+&%\$#\=~_\-@]*)*[^\.\,\?\"\'\(\)\[\]!;<>{}\s\x7F-\xFF])?)$/)){return false}else{return true}},validateUSDate:function(a){return validanguage.validateDate(a)},validateUSPhoneNumber:function(a){if(!a.match(/^\D?(\d{3})\D?\D?(\d{3})\D?(\d{4})$/)){return false}else{return true}},validateUSSSN:function(a){if(!a.match(/^\d{3}( |-|.){0,1}\d{2}( |-|.){0,1}\d{4}$/)){return false}else{return true}},validateUSZipCode:function(a){if(!a.match(/^\d{5}( |-|.){0,1}(\d{4})?$/)){return false}else{return true}},validationWrapper:function(e,customEvent){var calledManually=false;if(validanguage.inArray(customEvent,validanguage.supportedEvents)){var $this=document.getElementById(e);var type=customEvent;var id=e;var calledManually=true}else{if(customEvent=="validateForm"){var $this=e;var form=validanguage.whichFormAmI($this);var type="submit"}else{var evt=e||window.evt;var $this=evt.currentTarget||evt.srcElement;var type=evt.type;if(type=="submit"){var form=validanguage.whichFormAmI($this);var id=form}else{var id=$this.id;var form=validanguage.formLookup[id]}if(customEvent=="typingTimeout"){if(validanguage.typingDelay[id]){window.clearTimeout(validanguage.typingDelay[id])}eval("validanguage.typingDelay[id] = window.setTimeout(\"validanguage.validationWrapper('"+id+"', 'typing')\", validanguage.settings.typingDelay );");return true}}}if(typeof validanguage.el[form]!="undefined"&&typeof validanguage.el[form].disabled!="undefined"&&validanguage.el[form].disabled==true){return true}if(validanguage.forcedSubmission){return true}var validations=(type=="submit")?validanguage.forms[form].validations:validanguage.el[id].handlers[type];var i=validations.length;var failedValidations={};if(!validanguage.ajaxLookup[id]){validanguage.ajaxLookup[id]=[1]}var ajaxLocation=(type=="submit")?"forms":"fields";if(!validanguage[ajaxLocation][id]){validanguage[ajaxLocation][id]={}}if(!validanguage[ajaxLocation][id][type]){validanguage[ajaxLocation][id][type]={}}validanguage[ajaxLocation][id][type].dispatchedAjax={};if(typeof validanguage[ajaxLocation][id][type].failedValidations=="undefined"){validanguage[ajaxLocation][id][type].failedValidations={}}if(!calledManually&&!validanguage.empty(validanguage[ajaxLocation][id][type].failedValidations)){validanguage[ajaxLocation][id][type].failedValidations={}}if(type=="submit"){if(validanguage.empty(validanguage[ajaxLocation][form][type].failedValidations)){outerLoop:for(var j=0;j<i;j++){if(typeof validations[j]=="undefined"||validations[j]==999){continue outerLoop}id=validations[j].element.id;var $this=validations[j].element;if((typeof failedValidations[id]!="undefined")||(typeof $this.disabled!="undefined"&&$this.disabled==true)||(typeof validanguage.el[id].disabled!="undefined"&&validanguage.el[id].disabled==true)){continue outerLoop}if(typeof validanguage.el[id].failed!="undefined"&&validanguage.el[id].failed==true){failedValidations[id]={failed:true,field:validanguage.el[id].field};continue outerLoop}var validOptionalField=!!(typeof validanguage.el[id].required!="undefined"&&(validanguage.el[id].required==false||validanguage.el[id].required=="false")&&!$this.value.match(/[^\s]/));var validationsCounter=validations[j].validationsCounter;var validation=validanguage.el[id].validations[validationsCounter];var funcs=validanguage.resolveArray(validation.name,"function");innerLoop:for(var m=funcs.length-1;m>-1;m--){if(typeof failedValidations[id]!="undefined"){continue innerLoop}if(validation.isAjax&&!validOptionalField){if(!validanguage.ajaxLookup[id]){validanguage.ajaxLookup[id]=[1]}var dispatchAjax=true;if(validanguage.settings.cacheAjaxLookups&&validanguage.ajaxLookup[id].length>1){ajaxLookupLoop:for(var ajaxLookupIndex=validanguage.ajaxLookup[id].length-1;ajaxLookupIndex>-1;ajaxLookupIndex--){var lookupToCheck=validanguage.ajaxLookup[id][ajaxLookupIndex];if(lookupToCheck.value==$this.value&&typeof lookupToCheck.result=="boolean"){dispatchAjax=false;var result=lookupToCheck.result;if(result==false){failedValidations[id]=validation;failedValidations[id].field=validanguage.el[id].field;failedValidations[id].errorMsg=lookupToCheck.errorMsg}break ajaxLookupLoop}}}if(dispatchAjax){validanguage[ajaxLocation][form][type].dispatchedAjax[$this.id]=new Date().getTime();failedValidations[id]=validation;failedValidations[id].field=validanguage.el[id].field;funcs[m].call($this,$this.value,validanguage.ajaxLookup[id][0]);var ajaxCounter=validanguage.ajaxLookup[id][0]++;validanguage.ajaxLookup[id].push({counter:ajaxCounter,eventType:type,value:$this.value,result:"pending"});var result="pending"}}else{var result=(validOptionalField||funcs[m].call($this,$this.value))}if(result==false){failedValidations[id]=validation;failedValidations[id].field=validanguage.el[id].field;if(!validanguage.forms[form].settings.validateAllFieldsOnsubmit){break outerLoop}}else{var onsuccess=validanguage.getElSetting("onsuccess",id,validation);successHandlers=validanguage.resolveArray(onsuccess,"function");for(var n=successHandlers.length-1;n>-1;n--){successHandlers[n].call($this)}}}}validanguage.forms[form][type].failedValidations=failedValidations}if(!validanguage.empty(validanguage.forms[form][type].dispatchedAjax)){validanguage.forms[form][type].ajaxInterval=window.setInterval(function(){validanguage.ajaxValidationWrapper(form,type)},500);return false}failedValidations=(validanguage.forms[form][type].failedValidations==="callManually")?{}:validanguage.forms[form][type].failedValidations;validanguage.forms[form][type].failedValidations={};if(validanguage.empty(failedValidations)){var submitStatus=true}else{for(var o in failedValidations){if(typeof failedValidations[o]=="function"){continue}var id=o;$this=document.getElementById(o);validation=failedValidations[o];var focusOnerror=validanguage.getElSetting("focusOnerror",id,validation);var errorMsg=validanguage.getElSetting("errorMsg",id,validation);var onerror=validanguage.getElSetting("onerror",id,validation);errorHandlers=validanguage.resolveArray(onerror,"function");for(var m=errorHandlers.length-1;m>-1;m--){errorHandlers[m].call($this,errorMsg)}var focusOnerror=validanguage.getElSetting("focusOnerror",id,validation);if(focusOnerror==true){$this.focus()}var showAlert=validanguage.getElSetting("showAlert",id,validation);if(showAlert){alert(errorMsg)}}var submitStatus=false}var transformation=(validanguage.el[form]&&validanguage.el[form].onsubmit)?validanguage.el[form].onsubmit:[];if(typeof transformation=="string"){transformation=[transformation]}for(var n=transformation.length-1;n>-1;n--){var transformations=validanguage.resolveArray(transformation[n],"function");for(var o=transformations.length-1;o>-1;o--){var returnStatus=transformations[o].call(document.getElementById(form),submitStatus,failedValidations);if(typeof returnStatus=="boolean"){submitStatus=returnStatus}}}if(customEvent=="validateForm"){return{result:submitStatus,failedValidations:failedValidations}}return submitStatus}else{var validation;if((typeof validanguage.el[id].disabled=="boolean"&&validanguage.el[id].disabled==true)||(typeof $this.disabled!="undefined"&&$this.disabled==true)){return}var transformations=validanguage.el[id].transformations;var p=transformations.length;for(var q=0;q<p;q++){if(typeof transformations[q]["on"+type]=="undefined"||transformations[q]["on"+type]!=true){continue}var transformation=validanguage.resolveArray(transformations[q].name,"function");var trLength=transformation.length;for(var m=0;m<trLength;m++){transformation[m].call($this)}}var validOptionalField=!!(typeof validanguage.el[id].required!="undefined"&&(validanguage.el[id].required==false||validanguage.el[id].required=="false")&&!$this.value.match(/[^\s]/));if(typeof validanguage.el[id].failed=="boolean"&&validanguage.el[id].failed==true){result=false}else{if(validanguage.empty(validanguage.fields[id][type].failedValidations)){var validationCounter;outerLoop:for(var j=0;j<i;j++){if(typeof validations[j]=="undefined"||validations[j]==999){continue outerLoop}else{validationCounter=validations[j]}validation=validanguage.el[id].validations[validationCounter];var funcs=validanguage.resolveArray(validation.name,"function");for(var m=funcs.length-1;m>-1;m--){if(typeof validation.isAjax!="undefined"){var dispatchAjax=true;if(validanguage.settings.cacheAjaxLookups&&validanguage.ajaxLookup[id].length>1){ajaxLookupLoop:for(var ajaxLookupIndex=validanguage.ajaxLookup[id].length-1;ajaxLookupIndex>-1;ajaxLookupIndex--){var lookupToCheck=validanguage.ajaxLookup[id][ajaxLookupIndex];if(lookupToCheck.value==$this.value&&typeof lookupToCheck.result=="boolean"){dispatchAjax=false;var result=lookupToCheck.result;if(result==false){failedValidations[id]=validation;failedValidations[id].field=validanguage.el[id].field;failedValidations[id].errorMsg=lookupToCheck.errorMsg}break ajaxLookupLoop}}}if(dispatchAjax&&!validOptionalField){validanguage.fields[id][type].dispatchedAjax[id]=new Date().getTime();failedValidations[id]=validation;failedValidations[id].field=validanguage.el[id].field;funcs[m].call($this,$this.value,validanguage.ajaxLookup[id][0]);var ajaxCounter=validanguage.ajaxLookup[id][0]++;validanguage.ajaxLookup[id].push({counter:ajaxCounter,eventType:type,value:$this.value,result:"pending"})}}else{var result=(validOptionalField||funcs[m].call($this,$this.value))}if(result==false){break outerLoop}}}if(validationCounter==undefined){return true}validanguage.fields[id][type].failedValidations=failedValidations}}if(!validanguage.empty(validanguage.fields[id][type].dispatchedAjax)){validanguage.fields[id][type].ajaxInterval=window.setInterval(function(){validanguage.ajaxValidationWrapper(id,type)},500);return false}if(typeof result=="undefined"){failedValidations=(validanguage.fields[id][type].failedValidations==="callManually")?{}:validanguage.fields[id][type].failedValidations;if(failedValidations[id]&&failedValidations[id].name){validation=failedValidations[id].name}var result=validanguage.empty(failedValidations)?true:false}validanguage.fields[id][type].failedValidations={};if(result==true){var onsuccess=validanguage.getElSetting("onsuccess",id,validation);successHandlers=validanguage.resolveArray(onsuccess,"function");for(var m=successHandlers.length-1;m>-1;m--){successHandlers[m].call($this)}return true}else{var focusOnerror=validanguage.getElSetting("focusOnerror",id,validation);var errorMsg=(failedValidations[id]&&failedValidations[id].errorMsg)?failedValidations[id].errorMsg:validanguage.getElSetting("errorMsg",id,validation);var onerror=(failedValidations[id]&&failedValidations[id].onerror)?failedValidations[id].onerror:validanguage.getElSetting("onerror",id,validation);errorHandlers=validanguage.resolveArray(onerror,"function");for(var m=errorHandlers.length-1;m>-1;m--){errorHandlers[m].call($this,errorMsg)}var focusOnerror=validanguage.getElSetting("focusOnerror",id,validation);if(focusOnerror==true){$this.focus()}var showAlert=validanguage.getElSetting("showAlert",id,validation);if(showAlert){alert(errorMsg)}return false}}},whichFormAmI:function(d){if(typeof d.id!="undefined"&&(!validanguage.empty(d.id))){return d.id}var a=document.forms;for(var c=0,b=a.length;c<b;c++){if(a[c]==d){return c}}}};validanguage.init();